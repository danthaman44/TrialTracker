<!--*************************** begin Edit Data ******************** -->  

<div class="tab-pane fade

<% if session[:current_tab] == 'edit_data' %>
in active
  <% end %>

" id="edit">
<!--




<form class="form-inline" action="#" method="post">
                <input id="quantity" type="text" class="input-small" placeholder="1" >
                    <div class="btn-group" data-toggle="buttons-checkbox">
                        <button name="enrolled" type="button" class="btn btn-primary">Enrolled</button>
                        <button type="button" class="btn btn-primary">Vulnerable</button>
                        <button type="button" class="btn btn-primary">Refused</button>
                        <button type="button" class="btn btn-primary">Withdrawn</button>
                        <button type="button" class="btn btn-primary">Lost</button>
                    </div>
                    
                    <button type="submit" class="btn btn-success">Add Subject(s)</button>
                    </form>

-->
<div class="row-fluid">
<div class= "span12">
       <legend>My Data</legend>
      </div>
    </div>

<table class = "table table-hover table-condensed table-bordered table-striped" style = "font-size:14px" id="data_table">
                
                <thead>
                    <tr>
                        <th style="text-align: left;">Date</th>
                        <th>Enrolled</th>
                        <th>Active</th>
                        <th>Completed</th>
                        <th>Withdrawn</th>
                        <th>Refused</th>
                        <th>Lost</th>
                    </tr>
                </thead>
                <tr>
                  <%= form_for(@entry, :remote => true) do |f| %>
                    <td style="text-align: left;"><b>Today</b></td>
                   
                    <td ><b><%= f.text_field :enrolled, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.enrolled %></b></td>
              <td ><b><%= f.text_field :active, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.active %></b></td>
              <td ><b><%= f.text_field :completed, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.completed %></b></td>
              <td ><b><%= f.text_field :withdrawn, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.withdrawn %></b></td>
              <td ><b><%= f.text_field :refused, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.refused %></b></td>
              <td ><b><%= f.text_field :lost, :type => 'text', :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right",
              :value => @last_entry.lost %></b></td>
              <%= f.hidden_field :trial_id, :value => @current_trial.id %>
              <td><%= f.submit "Update", :class=>"btn btn-success"%></td>
                <% end %>
                </tr>

                
                <% @entries_recentFirst.each do |entry| %>
                <tr id="entry_<%= entry.id %>">
                    <td style="text-align: left;" id="input_at_<%= entry.id %>"><%= entry.input_at.strftime("%m/%d/%Y") %></td>
                    
                    <td id="enrolled_<%= entry.id %>"><%= entry.enrolled %></td>

                    <td id="active_<%= entry.id %>"><%= entry.active %></td>
                    <td id="completed_<%= entry.id %>"><%= entry.completed %></td>
                    <td id="withdrawn_<%= entry.id %>"><%= entry.withdrawn %></td>
                    <td id="refused_<%= entry.id %>"><%= entry.refused %></td>
                    <td id="lost_<%= entry.id %>"><%= entry.lost %></td>
                    <td><a href = "#" onclick="javascript:editEntry(<%= entry.id %>)">edit</a>
                      <%= link_to 'Delete', entry_path(entry), :method => :delete, :toDelete => entry.id, :remote=>true, :class=>'delete_post' %></td>
                </tr> 
              </div>
                <% end %> 
                                          
            </table>
<div id="test">
</div>


            
        </div>

        <script type="text/javascript">
            function editEntry(id) {
            var row = document.getElementById('entry_'.concat(id.toString()));

            var input_at = document.getElementById('input_at_'.concat(id.toString())).innerHTML;
            var enrolled = document.getElementById('enrolled_'.concat(id.toString())).innerHTML;
            var active = document.getElementById('active_'.concat(id.toString())).innerHTML;
            var completed = document.getElementById('completed_'.concat(id.toString())).innerHTML;
            var withdrawn = document.getElementById('withdrawn_'.concat(id.toString())).innerHTML;
            var refused = document.getElementById('refused_'.concat(id.toString())).innerHTML;
            var lost = document.getElementById('lost_'.concat(id.toString())).innerHTML;

            //var form = '<form accept-charset = "UTF-8" action = "/entries/'.concat(id);
            //form = form.concat('/edit" method = "post" data-remote="true" > 
              var form = '<%= form_for @entry2, :remote => true do |f| %><%= f.text_field :enrolled, :type => "text", :style =>"width:60px; height:30px; margin-bottom:0px; text-align:right", :value => @last_entry.enrolled %><%= f.submit "Confirm", :class=>"btn btn-success", :id=>"editEntry"%><% end %>';
            
            row.innerHTML = form;
            }

        </script>
                            
                            
          <!--**************** end Edit Data ******************** -->