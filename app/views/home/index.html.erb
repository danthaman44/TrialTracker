
<html>
    <head>
        <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="description" content="">
                    <meta name="author" content="">
                        
                        <!-- Le styles -->
                        <link href="/assets/bootstrap.css" media="screen" rel="stylesheet" type="text/css" />
                            <style type="text/css">
                                body {
                                    padding-top: 60px;
                                    padding-bottom: 40px;
                                }
                                .sidebar-nav {
                                    padding: 9px 0;
                                }
                                #data_table th, #data_table td {
                                  text-align: right;
                                }
                                </style>
                            <link href="assets/bootstrap-responsive.css" rel="stylesheet">
                                
                                <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
                                <!--[if lt IE 9]>
                                 <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
                                 <![endif]-->
                                
                                                                                    
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawBarChart);
            google.setOnLoadCallback(drawLineChart);
                        
            function drawBarChart() {
                // Create and populate the data table.
                var data = google.visualization.arrayToDataTable(
                    [
                    ['Total', 'Subjects'],
                    <% @totals.each_pair do |k,v| %>
                    [ '<%= k.capitalize %>', <%= v %> ],
                    <% end %>
                    ]);
                
                // Create and draw the visualization.
                new google.visualization.ColumnChart(document.getElementById('bar_chart')).
                draw(data,
                     {
                     width:500, height:300,
                     backgroundColor:'#EDEDED',
                     legend: {position: 'none'},
                     chartArea: {top: 20, left: 60, height:200, width:400}
                     }
                     );
            }

            function drawLineChart() {
                var data = new google.visualization.DataTable();

                data.addColumn('date', 'Day');
                data.addColumn('number', 'Enrolled');
                data.addColumn('number', 'Projected');
                  data.addRows([
                    <% @entries.each do |entry| %> 
                    [new Date (<%= entry.input_at.year%>, <%= entry.input_at.mon%>, <%= entry.input_at.mday%>),  
                      <%= entry.enrolled %>,  100],
                  //[new Date(2012, 0, 2),  130,      110],
                  //[new Date(2012, 0, 3),  142,      120],
                  //[new Date(2012, 0, 4),  146,      130],
                  //[new Date(2012, 0, 5),  150,      140]
                    <% end%>
                  ]);

                var options = {
                  width:500, height:400,
                  backgroundColor:'#EDEDED',
                  legend: {position: 'none'},
                  chartArea: {top: 20, left: 60, width:400}
                };

                var chart = new google.visualization.LineChart(document.getElementById('line_chart'));
                chart.draw(data, options);


var data2 = new google.visualization.DataTable();

                data2.addColumn('date', 'Day');
                data2.addColumn('number', 'Withdrawn');
                data2.addColumn('number', 'Projected');

                data2.addRows([
                 <% @entries.each do |entry| %> 
                    [new Date (<%= entry.input_at.year%>, <%= entry.input_at.mon%>, <%= entry.input_at.mday%>),  
                      <%= entry.withdrawn %>,  100],
                  <% end%>
                ]);



                var chart2 = new google.visualization.LineChart(document.getElementById('line_chart_withdrawn'));
                chart2.draw(data2, options);
                var chart3 = new google.visualization.LineChart(document.getElementById('line_chart_vulnerable'));
                chart3.draw(data, options);
            }
            
            </script>
    </head>
    
    <body>

<!-- Ashwin your thing is in _trial_data.html.erb, so just add a render 'trial_data' here to see it-->




        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="#">TrialTracker</a>
                    <div class="nav-collapse collapse">
                        <p class="navbar-text pull-right">
                        Logged in as <a href="#" class="navbar-link">Username</a>
                        </p>
                        <ul class="nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        
        
        
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span3" >
                    <div class="well sidebar-nav" data-spy="affix" style = "width:282px">
                        <ul class="nav nav-list">
                            <li class="nav-header">dukeCRC24</li>
                            <li class="nav-header">My Trials</li>
                            <li class="active"><a href="#">Cancer</a></li>
                            <li><a href="#">Flesh Eating Bacteria</a></li>
                            <li><a href="#">Herpes</a></li>
                            <li><a href="#">Worms</a></li>
                            <li><a href="#">Leukemia</a></li>
                            <li><a href="#">Lung Cancer</a></li>
                            
                            <li><a href="#">Obesity</a></li>
                            <li><a href="#">Elephantitis</a></li>
                            <li class="nav-header">Add or join more Trials</li>
                            <a href="#addTrialModal" role="button" class="btn btn-success" data-toggle="modal">New Trial</a>
                        </ul>
                    </div><!--/.well -->
                </div><!--/span-->

<!-- *********** modal is in views/home/_modal.html.erb ****************-->
        <%= render "modal" %>


                <div class="span9">
                    
                    <div class="hero-unit">

                      
                        
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="active"><a href="#home" data-toggle="tab">View Trends</a></li>
                            <li><a href="#edit" data-toggle="tab">Edit Data</a></li>
                            <!--<li><a href="#report" data-toggle="tab">Report</a></li>-->
                            <li><a href="#settings" data-toggle="tab">Settings</a></li>
                        </ul>
                        
                        <div class="tab-content">


<!-- *********** View Trends is in views/home/_view_trends.html.erb ****************-->
       <%= render "view_trends" %>                     
                            
                            
                            
                     
                
<!-- *********** Edit Data is in views/home/_edit_data.html.erb ****************-->
       <%= render "edit_data" %> 

        
                            
                            
                            <!--<div class="tab-pane fade" id="report">...</div>-->
                            <div class="tab-pane fade" id="settings">...</div>
                        </div>
                        
                        
                    </div>
                    
                </div><!--/span-->
            </div><!--/row-->
            
            <hr>
            
            <footer>
                <p>&copy; Company 2012</p>
            </footer>
            
        </div><!--/.fluid-container-->
        
        <!-- Le javascript
         ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="/assets/bootstrap.min.js"></script>
        
    </body>
